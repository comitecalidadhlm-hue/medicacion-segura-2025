<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Desafío de Seguridad del Paciente</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 700px;
            margin: auto;
            padding: 2em;
        }
        .step {
            display: none;
        }
        .step.active {
            display: block;
        }
        .question {
            margin-bottom: 1em;
        }
        .answers label {
            display: block;
            margin: 0.5em 0;
        }
        .buttons {
            margin-top: 1em;
        }
        .buttons button {
            margin-right: 1em;
            padding: 0.5em 1em;
        }
        .result {
            font-size: 1.2em;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>Desafío de Seguridad del Paciente</h1>

    <div id="quiz"></div>

    <script>
        const questions = [
            {
                question: "¿Qué es un evento adverso?",
                options: [
                    "Una complicación inevitable del tratamiento",
                    "Un daño al paciente relacionado con la atención médica",
                    "Una condición previa del paciente",
                    "Una respuesta esperada al tratamiento"
                ],
                correctAnswer: 1
            },
            {
                question: "¿Cuál es el objetivo principal de la seguridad del paciente?",
                options: [
                    "Reducir costos hospitalarios",
                    "Evitar demandas legales",
                    "Prevenir daños a los pacientes durante la atención",
                    "Aumentar el número de pacientes"
                ],
                correctAnswer: 2
            },
            {
                question: "¿Qué es una práctica segura?",
                options: [
                    "Una acción basada en evidencia para evitar daños",
                    "Un procedimiento nuevo sin evaluación",
                    "Una decisión tomada por un solo profesional",
                    "Un protocolo opcional"
                ],
                correctAnswer: 0
            }
        ];

        let currentStep = 0;
        let score = 0;

        const quizContainer = document.getElementById("quiz");

        function loadStep() {
            quizContainer.innerHTML = "";

            if (currentStep < questions.length) {
                const questionObj = questions[currentStep];
                const stepDiv = document.createElement("div");
                stepDiv.className = "step active";

                const questionEl = document.createElement("div");
                questionEl.className = "question";
                questionEl.textContent = `Pregunta ${currentStep + 1}: ${questionObj.question}`;

                const answersEl = document.createElement("div");
                answersEl.className = "answers";

                questionObj.options.forEach((option, index) => {
                    const label = document.createElement("label");
                    const input = document.createElement("input");
                    input.type = "radio";
                    input.name = "answer";
                    input.value = index;
                    label.appendChild(input);
                    label.appendChild(document.createTextNode(" " + option));
                    answersEl.appendChild(label);
                });

                const buttonsDiv = document.createElement("div");
                buttonsDiv.className = "buttons";

                const nextBtn = document.createElement("button");
                nextBtn.textContent = "Siguiente";
                nextBtn.onclick = handleNext;

                buttonsDiv.appendChild(nextBtn);

                stepDiv.appendChild(questionEl);
                stepDiv.appendChild(answersEl);
                stepDiv.appendChild(buttonsDiv);

                quizContainer.appendChild(stepDiv);
            } else {
                showResult();
            }
        }

        function handleNext() {
            const selected = document.querySelector("input[name='answer']:checked");
            if (!selected) {
                alert("Por favor selecciona una respuesta.");
                return;
            }

            const answer = parseInt(selected.value);
            if (answer === questions[currentStep].correctAnswer) {
                score++;
            }

            currentStep++;
            loadStep();
        }

        function showResult() {
            quizContainer.innerHTML = `<p class="result">Has obtenido ${score} de ${questions.length} respuestas correctas.</p>`;
        }

        loadStep();
    </script>
</body>
</html>
